<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tenerife Beach Rank + Safety Flags</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<style>
:root {
  --bg-color:#f0f4f8;
  --card-bg:#ffffff;
  --text-main:#333;
  --text-light:#666;
  --green:#2ecc71;
  --yellow:#f1c40f;
  --red:#e74c3c;
  --footer-bg:#000;
}
body {
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;
  background:var(--bg-color);
  margin:0;
  padding:20px;
  padding-bottom:120px;
  color:var(--text-main);
}
header { text-align:center; margin-bottom:20px }
h1 { margin:0; font-size:2rem; color:#2c3e50 }
.subtitle { color:var(--text-light); font-size:.9rem; }
.last-updated { font-size:.8rem; color:#888; margin-top:8px; font-weight:bold; }
.lang-switcher { margin:15px 0; display:flex; justify-content:center; gap:12px; flex-wrap:wrap; }
.lang-btn { background:#fff; border:1px solid #ddd; padding:8px; border-radius:50%; cursor:pointer; font-size:1.4rem; box-shadow:0 2px 4px rgba(0,0,0,.1); }
.lang-btn.active { border-color:#3498db; background:#ebf5ff; }
.view-toggle { display:flex; justify-content:center; gap:10px; margin:15px 0; }
.view-toggle button { padding:8px 14px; border-radius:20px; border:1px solid #ccc; background:#fff; cursor:pointer; font-weight:600; }
#map { height:70vh; max-width:1400px; margin:0 auto; border-radius:12px; display:none; }
.beach-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(320px,1fr)); gap:20px; max-width:1400px; margin:0 auto; }
.card { background:var(--card-bg); border-radius:12px; padding:20px; box-shadow:0 4px 6px rgba(0,0,0,.05); border-top:6px solid #ccc; transition: transform 0.2s; }
.card:hover { transform: translateY(-3px); }
.status-green { border-color:var(--green); }
.status-yellow { border-color:var(--yellow); }
.status-red { border-color:var(--red); }
.card-header { display:flex; justify-content:space-between; align-items:flex-start; gap:10px; }
.beach-name a { color:#2c3e50; text-decoration:none; font-weight:700; }
.beach-town { font-size:.75rem; color:#888; margin-top:2px; }
.beach-map-hint { font-size:.7rem; color:#aaa; }
.score-badge { padding:5px 12px; border-radius:20px; font-weight:bold; color:#fff; }
.status-green .score-badge { background:var(--green); }
.status-yellow .score-badge { background:var(--yellow); color:#333; }
.status-red .score-badge { background:var(--red); }
.metrics { display:grid; grid-template-columns:repeat(4,1fr); gap:6px; margin-top:10px; }
.metric-item { background:#f8f9fa; border-radius:8px; display:flex; flex-direction:column; align-items:center; justify-content:center; min-height:80px; }
.metric-emoji { font-size:1.2rem; margin-bottom:4px; }
.metric-label { font-size:.55rem; text-transform:uppercase; color:#777; font-weight:bold; }
.metric-value { font-size:.85rem; font-weight:600; }
.main-footer { background:var(--footer-bg); color:#fff; text-align:center; padding:25px 10px; position:fixed; bottom:0; width:100%; font-size:13px; }
</style>
</head>
<body>
<header>
<h1 id="title-text">Tenerife Beach Rank</h1>
<div class="lang-switcher">
<button class="lang-btn active" id="btn-en" onclick="setLanguage('en')">ğŸ‡¬ğŸ‡§</button>
<button class="lang-btn" id="btn-es" onclick="setLanguage('es')">ğŸ‡ªğŸ‡¸</button>
<button class="lang-btn" id="btn-de" onclick="setLanguage('de')">ğŸ‡©ğŸ‡ª</button>
<button class="lang-btn" id="btn-fr" onclick="setLanguage('fr')">ğŸ‡«ğŸ‡·</button>
<button class="lang-btn" id="btn-ru" onclick="setLanguage('ru')">ğŸ‡·ğŸ‡º</button>
<button class="lang-btn" id="btn-nl" onclick="setLanguage('nl')">ğŸ‡³ğŸ‡±</button>
<button class="lang-btn" id="btn-pt" onclick="setLanguage('pt')">ğŸ‡µğŸ‡¹</button>
</div>
<div class="subtitle" id="subtitle-text">Live ranking: Weather, Wind & Wave Safety</div>
<div class="last-updated" id="last-update"></div>
<div class="view-toggle">
<button onclick="showList()">ğŸ“‹ List</button>
<button onclick="showMap()">ğŸ—ºï¸ Map</button>
</div>
</header>

<div id="map"></div>
<div id="app" class="beach-grid"></div>
<footer class="main-footer">Â© 2026 Tenerife Beach Rank</footer>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
// === Languages ===
const i18n = {
  en:{title:"Tenerife Beach Rank",sub:"Live ranking: Weather, Wind & Waves",temp:"Temp",wind:"Wind",clouds:"Clouds",waves:"Waves",update:"Last Update"},
  es:{title:"Ranking Playas Tenerife",sub:"ClasificaciÃ³n en vivo por clima, viento y olas",temp:"Temp",wind:"Viento",clouds:"Nubes",waves:"Olas",update:"Ãšltima act."},
  de:{title:"Teneriffa Strand-Ranking",sub:"Live-Ranking nach Wetter, Wind & Wellen",temp:"Temp",wind:"Wind",clouds:"Wolken",waves:"Wellen",update:"Letztes Update"},
  fr:{title:"Classement Plages TÃ©nÃ©rife",sub:"Classement en direct (MÃ©tÃ©o, Vent, Vagues)",temp:"Temp",wind:"Vent",clouds:"Nuages",waves:"Vagues",update:"Mis Ã  jour"},
  ru:{title:"Ğ ĞµĞ¹Ñ‚Ğ¸Ğ½Ğ³ Ğ¿Ğ»ÑĞ¶ĞµĞ¹ Ğ¢ĞµĞ½ĞµÑ€Ğ¸Ñ„Ğµ",sub:"Ğ–Ğ¸Ğ²Ğ¾Ğ¹ Ñ€ĞµĞ¹Ñ‚Ğ¸Ğ½Ğ³: Ğ¿Ğ¾Ğ³Ğ¾Ğ´Ğ°, Ğ²ĞµÑ‚ĞµÑ€ Ğ¸ Ğ²Ğ¾Ğ»Ğ½Ñ‹",temp:"Ğ¢ĞµĞ¼Ğ¿.",wind:"Ğ’ĞµÑ‚ĞµÑ€",clouds:"ĞĞ±Ğ»Ğ°ĞºĞ°",waves:"Ğ’Ğ¾Ğ»Ğ½Ñ‹",update:"ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¾"},
  nl:{title:"Tenerife Strand Ranglijst",sub:"Live ranglijst op basis van weer en golven",temp:"Temp",wind:"Wind",clouds:"Wolken",waves:"Golven",update:"Laatste update"},
  pt:{title:"Ranking Praias Tenerife",sub:"Ranking ao vivo baseado no clima e ondas",temp:"Temp",wind:"Vento",clouds:"Nuvens",waves:"Ondas",update:"Ãšltima atualiz."}
};

let currentLang='en';

// === Beaches ===
const beaches = [
{name:"Playa de Benijo",town:"Taganana",coast:"north",lat:28.5724,lon:-16.1867},
{name:"Playa de AlmÃ¡ciga",town:"Taganana",coast:"north",lat:28.5702,lon:-16.2005},
{name:"Playa de Las Teresitas",town:"San AndrÃ©s",coast:"north",lat:28.5096,lon:-16.1837},
{name:"Playa del Duque",town:"Costa Adeje",coast:"south",lat:28.0908,lon:-16.7431},
{name:"Playa de El MÃ©dano",town:"El MÃ©dano",coast:"east",lat:28.0435,lon:-16.5385},
// ... add all 80 beaches here in the same format
];

// === Scoring ===
function scoreBeach(b){
  let s=0;
  // Temp
  if(b.temp>=22&&b.temp<=30)s+=4;
  else if(b.temp>=19)s+=2;
  else s+=1;
  // Wind softened
  if(b.wind<18)s+=3;
  else if(b.wind<26)s+=2;
  else if(b.wind<32)s+=1;
  // Clouds
  if(b.clouds<20)s+=3;
  else if(b.clouds<50)s+=1.5;
  // Wave bias north
  let wave=b.wave;
  if(b.coast==="north") wave*=0.65;
  // Status
  let status=s>=8?'green':s>=6?'yellow':'red';
  if(b.wave>2) status='red';
  else if(b.wave>1.2 && status==='green') status='yellow';
  return {...b,score:Math.round(s),status};
}

// === Emojis ===
function getEmojis(b){
  let waveEmoji='ğŸŸ¢';
  if(b.wave>2) waveEmoji='ğŸ”´';
  else if(b.wave>1.2) waveEmoji='ğŸŸ¡';
  return {
    temp:b.temp>28?'ğŸ”¥':(b.temp>20?'â˜€ï¸':'ğŸŒ¥ï¸'),
    wind:b.wind>22?'ğŸš©':(b.wind>12?'ğŸƒ':'ğŸ’¨'),
    clouds:b.clouds>50?'â˜ï¸':(b.clouds>15?'â›…':'â˜€ï¸'),
    waves:waveEmoji
  };
}

// === Render Beaches ===
let globalBeachData=[];
function renderBeaches(){
  const app=document.getElementById('app');
  app.innerHTML='';
  globalBeachData.sort((a,b)=>b.score-a.score).forEach(b=>{
    const e=getEmojis(b);
    const url=`https://www.google.com/maps?q=${b.lat},${b.lon}`;
    app.innerHTML+=
    `<div class="card status-${b.status}">
      <div class="card-header">
        <div>
          <div class="beach-name"><a href="${url}" target="_blank">${b.name}</a></div>
          <div class="beach-town">${b.town}</div>
          <div class="beach-map-hint">Click beach to open Google Maps</div>
        </div>
        <div class="score-badge">${b.score}/10</div>
      </div>
      <div class="metrics">
        <div class="metric-item"><div class="metric-emoji">${e.temp}</div><div class="metric-label">${i18n[currentLang].temp}</div><div class="metric-value">${b.temp}Â°C</div></div>
        <div class="metric-item"><div class="metric-emoji">${e.wind}</div><div class="metric-label">${i18n[currentLang].wind}</div><div class="metric-value">${b.wind} km/h</div></div>
        <div class="metric-item"><div class="metric-emoji">${e.clouds}</div><div class="metric-label">${i18n[currentLang].clouds}</div><div class="metric-value">${b.clouds}%</div></div>
        <div class="metric-item"><div class="metric-emoji">${e.waves}</div><div class="metric-label">${i18n[currentLang].waves}</div><div class="metric-value">${b.wave.toFixed(1)} m</div></div>
      </div>
    </div>`;
  });
}

// === Map View ===
let map;
function showMap(){
  document.getElementById('app').style.display='none';
  document.getElementById('map').style.display='block';
  if(!map){
    map=L.map('map').setView([28.3,-16.6],10);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);
    globalBeachData.forEach(b=>{
      const color=b.status==='green'?'green':b.status==='yellow'?'orange':'red';
      L.circleMarker([b.lat,b.lon],{radius:6,color}).addTo(map).bindPopup(b.name);
    });
  }
}
function showList(){
  document.getElementById('map').style.display='none';
  document.getElementById('app').style.display='grid';
}

// === Language ===
function setLanguage(lang){
  currentLang=lang;
  document.getElementById('title-text').textContent=i18n[lang].title;
  document.getElementById('subtitle-text').textContent=i18n[lang].sub;
  document.querySelectorAll('.lang-btn').forEach(btn=>btn.classList.remove('active'));
  document.getElementById('btn-'+lang).classList.add('active');
  renderBeaches();
  updateTimestamp();
}

// === Timestamp ===
function updateTimestamp(){
  const now=new Date();
  const label=i18n[currentLang].update;
  document.getElementById('last-update').textContent=`${label}: ${now.toLocaleTimeString()}`;
}

// === Mock Initialization ===
globalBeachData=beaches.map(b=>scoreBeach({...b,temp:24,wind:18,clouds:20,wave:1.1}));
renderBeaches();
updateTimestamp();
</script>
</body>
</html>
